# cookie 란
> 쿠키는 **특별한 저장공간(클라이언트 / 브라우저)에 있는 정보들**이다.  
> `localStorage`와 `sessionStorage`와 비슷한 개념이다.  

## cookie 의 특징
`cookie`는 다음과 같은 특징을 가진다.  
* 쿠키는 **클라이언트**에 저장된다.  
* 쿠키 하나의 용량은 **4KB** 정도이다.  
* 클라이언트는 300개까지 쿠키를 저장할 수 있고, 하나의 도메인당 20개의 값만 가질 수 있다.  
* 기본적으로 쿠키는 **웹 브라우저가 종료되면 삭제**된다. (만료날짜를 지정해주고 만료일이 되야 삭제된다.)  

## cooki 가 쓰이는 과정
![cookie](https://user-images.githubusercontent.com/68697807/119459553-c42de780-bd78-11eb-987d-68c254ec3ae1.png)

**쿠키는 위 그림처럼 사용된다.**
1. 클라이언트가 페이지를 요청(**request**)  
2. **서버에서 쿠키를 생성** 후, HTTP 헤더에 쿠키를 포함 시켜 응답  
    * 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음  
3. **같은 요청**을 할 경우 **HTTP 헤더에 쿠키**를 함께 보냄  
4. 서버에서 쿠키를 읽어 이전 상태 정보를 변경 할 필요가 있다면 쿠키를 업데이트하여 HTTP 헤더에 포함시켜 응답

## cookie 가 쓰이는 이유

* **브라우저**와 **서버**가 **HTTP 세션통신**을 하기 위해서 쓰인다.

# session 이란?

> **session**은 일정 시간 동안 같은 사용자로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 일정하게 유지 시키는 기술이다.  

위에서 **일정 시간**이란 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료함으로써 연결을 끝내는 시점을 말한다.  

* 요약 : 세션은 방문자가 웹서버에 접속해 있는 상태 즉, 서버와 클라이언트가 연결된 상태이다.

## session 이 만들어지는 과정
<img width="1120" alt="session1" src="https://user-images.githubusercontent.com/68697807/119488636-c0f52480-bd95-11eb-81ff-2531e3897485.png">

> session ID = ABC

1. 브라우저(클라이언트)가 처음으로 요청을 보낸다.
2. 서버는 요청을 받고, 처음 보기 때문에 새로운 `session ID`를 생성한다.
3. 서버가 브라우저(클라이언트)에게 요청한 정보와 해당 브라우저의 `session ID`를 알려준다.

서버는 위 그림에서 **ABC 공간** 에 클라이언트 정보를 저장한다. 그 장소는 메모리 / DB / 원격저장소가 될 수 있다. 

## session과 cookie의 관계

재정리
* 쿠키: 클라이언트에 잠시 저장하는 정보.
* 세션: 서버와 클라이언트가 연결된 상태.

요약: `sessionID`를 주고 받는데 쿠키를 사용한다.  
<img width="1120" alt="session cookie" src="https://user-images.githubusercontent.com/68697807/119489136-5690b400-bd96-11eb-9a44-c3913b646694.png">

1. 서버가 어떤 클라이언트인지 구분하기 위해 `sessionID`를 발급해서 클라이언트로 내려주면 클라이언트는 받은 `sessionID`를 **쿠키**에 저장한다.
2. 추후 요청이 있을 때마다 **쿠키에 담긴 `sessionID`**를 같이 보내주어 서버가 어떤 클라이언트의 요청인지 알 수 있게 한다.

> 클라이언트의 세션 ID가 저장된 쿠키를 **세션 쿠키**라고 부르기도 한다.

## session의 특징

위 그림의 **ABC 공간**에 저장되는 정보들의 특징이다.  

* 사용자 정보 파일을 **브라우저**에 저장하는 **쿠키**와 달리 **세션은 서버 측에서 관리**한다.
* **사용자에 대한 정보를 서버에** 두기 때문에 쿠키보다 **보안**에 좋지만, 사용자가 많아질수록 서버 메모리를 많이 차지하게 된다.
* 동접자 수가 많은 웹 사이트인 경우 서버에 과부하를 주게 되므로 **성능 저하의 요인**이 된다.
* **웹 브라우저가 종료**되면 **세션 쿠키**는 삭제된다.